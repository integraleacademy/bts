{% extends 'base.html' %}
{% block content %}
<h2>Administration</h2>

<form method="post" action="/admin/add" class="card">
  <input name="nom" placeholder="Nom" required>
  <input name="prenom" placeholder="PrÃ©nom" required>
  <button class="btn">â• Ajouter</button>
</form>

<table class="table">
  <tr>
    <th>Nom</th><th>PrÃ©nom</th><th>Status</th><th>Actions</th>
  </tr>
  {% for r in rows %}
  <tr>
    <td>{{r.nom}}</td>
    <td>{{r.prenom}}</td>
    <td>
      <!-- Badge colorÃ© -->
      <span class="badge" style="background: {{ r.status|status_color }};">
        {{ r.status }}
      </span>

      <!-- Formulaire de changement -->
      <form method="post" action="/update/{{r.id}}" style="margin-top:5px;">
        <select name="status">
          {% for s in statuses %}
            <option value="{{s}}" {% if s == r.status %}selected{% endif %}>{{s}}</option>
          {% endfor %}
        </select>
        <button type="submit" class="btn">ğŸ’¾</button>
      </form>
    </td>
    <td>
      <a class="btn" href="{{ url_for('edit', id=r.id) }}">âœï¸ Modifier</a>
      <form method="post" action="/delete/{{r.id}}" style="display:inline;">
        <button type="submit" class="btn">ğŸ—‘ï¸ Supprimer</button>
      </form>
      <a class="btn" href="{{ url_for('fiche', id=r.id) }}">ğŸ–¨ï¸ Fiche</a>
    </td>
  </tr>
  {% endfor %}
</table>
{% endblock %}
